# ============================================
# Nimbus Environment Configuration
# ============================================
# Copy this file to .env and update values for your environment

# Database Configuration (PostgreSQL 18)
DB_HOST=localhost              # Use 'db' for Docker Compose, 'localhost' for local dev
DB_PORT=5432
DB_NAME=nimbus
DB_USER=nimbus
DB_PASSWORD=nimbus_secret

# Optional: use DB_URL instead of individual values
# DB_URL=postgres://nimbus:nimbus_secret@localhost:5432/nimbus?sslmode=disable

# Backend Server Configuration
PORT=8080                      # Backend API port
FRONTEND_PORT=3000             # Frontend port (Docker only)

# Authentication & Security
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production  # CHANGE THIS!
JWT_EXPIRY=24h                 # Token expiration (e.g., 24h, 7d, 30d)
BCRYPT_COST=10                 # Password hashing cost (10-12 recommended)

# OAuth Configuration (Optional)
# Leave empty to disable OAuth providers
OAUTH_STATE_SECRET=your-oauth-state-secret-key-change-this      # For OAuth CSRF protection (optional, uses JWT_SECRET if not set)
FRONTEND_URL=http://localhost:3000                               # Frontend URL for OAuth redirects

# Google OAuth
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_REDIRECT_URL=http://localhost:8080/api/v1/auth/oauth/google/callback

# GitHub OAuth
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=
GITHUB_REDIRECT_URL=http://localhost:8080/api/v1/auth/oauth/github/callback

# Discord OAuth
DISCORD_CLIENT_ID=
DISCORD_CLIENT_SECRET=
DISCORD_REDIRECT_URL=http://localhost:8080/api/v1/auth/oauth/discord/callback

# CORS Configuration
# Comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:3000

# For production with multiple domains:
# CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# Cookie Security
# Set to "false" for local dev (HTTP), "true" for production (HTTPS)
COOKIE_SECURE=false

# Cookie Domain (default: localhost)
# COOKIE_DOMAIN=

# Service Health Checks
HEALTH_CHECK_INTERVAL=60       # Interval in seconds between health checks
HEALTH_CHECK_TIMEOUT=10        # Timeout in seconds for health check requests

# Metrics & Monitoring
METRICS_RETENTION_DAYS=30      # Number of days to retain status logs (default: 30)

# Prometheus Integration
# API Key for Prometheus (REQUIRED for metrics access - never expires)
# Generate a secure random key: openssl rand -hex 32
PROMETHEUS_API_KEY=your-secure-random-api-key-here-change-me

# Metrics endpoint (supports both JWT and API key):
#   - /api/v1/prometheus/metrics/user/:id   (User-specific services)
# See prometheus/SECURE_SETUP.md for configuration guide

# Frontend Configuration
# Note: Frontend auto-detects API URL at runtime based on browser location
# Only set these if you need to override the default behavior
# NEXT_PUBLIC_API_URL=http://localhost:8080/api/v1  # Full URL override (optional)
# NEXT_PUBLIC_API_PORT=8080                          # Backend port for runtime detection (default: 8080)
NEXT_PUBLIC_APP_NAME=Nimbus

# For production with custom domain:
# NEXT_PUBLIC_API_URL=https://api.yourdomain.com/api/v1

# ============================================
# Optional Services
# ============================================
# Uncomment and configure if using pgAdmin (Docker)
# PGADMIN_EMAIL=admin@nimbus.local
# PGADMIN_PASSWORD=admin